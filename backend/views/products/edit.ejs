<!DOCTYPE html>
<html lang="en">
  <%- include('../partials/head.ejs',{style:'login.css'}) %>
  <body>
    <%- include('../partials/header.ejs') %>
    <main>
      <h1 class="titulo__register">Editar producto</h1>

      <form
        action="/products/edit/<%= product.id %>"
        method="POST"
        class="form-register"
        enctype="multipart/form-data"
      >
        <label for="name">Nombre</label>
        <input
          type="text"
          id="name"
          name="name"
          value="<%= product.name %>"
          required
        />

        <label for="description">Descripción</label>
        <textarea name="description" id="description"><%= product.description.trim() %></textarea>

        <label for="image">Imagen (nombre de archivo)</label>
        <input
          type="file"
          id="image"
          name="image"
          value="<%= product.image %>"
        />

        <label for="category">Categoría:</label>
        <select id="category" name="category">
          <% categories.forEach(category => { %>
            <option value="<%= category.id %>" <%= product.category_id == category.id ? "selected" : "" %>><%= category.name %></option>
          <% }) %>
        </select>

        <label for="colors">Color:</label>
        <select id="colors" name="colors">
          <% colors.forEach(color => { %>
            <option value="<%= color.id %>" <%= product.color_id == color.id ? "selected" : "" %>><%= color.name %></option>
          <% }) %>
        </select>

        <label for="price">Precio</label>
        <input
          type="number"
          id="price"
          name="price"
          value="<%= product.price %>"
          step="0.01"
        />

        <button type="submit">Guardar cambios</button>
      </form>
    </main>

    <%- include('../partials/footer.ejs') %>
    <%- include('../partials/carrito.ejs') %>
    <script>
      document.querySelector(".menu").addEventListener("click", () => {
        const nav = document.querySelector("nav");
        nav.classList.toggle("nav-visible");
      });
    </script>
  </body>
</html>
